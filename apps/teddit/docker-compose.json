{
  "services": [
    {
      "name": "teddit",
      "image": "teddit/teddit:latest",
      "isMain": true,
      "internalPort": 8080,
      "environment": [
        {
          "key": "REDIS_HOST",
          "value": "teddit-redis"
        },
        {
          "key": "DOMAIN",
          "value": "${APP_DOMAIN}"
        },
        {
          "key": "THEME",
          "value": "dark"
        },
        {
          "key": "HTTPS_ENABLED",
          "value": "false"
        },
        {
          "key": "REDIRECT_HTTP_TO_HTTPS",
          "value": "false"
        },
        {
          "key": "REDIRECT_WWW",
          "value": "false"
        }
      ],
      "dependsOn": ["teddit-redis"],
      "healthCheck": {
        "test": "wget --no-verbose --tries=1 --spider http://localhost:8080/about",
        "interval": "1m",
        "timeout": "3s",
        "retries": 3
      }
    },
    {
      "name": "teddit-redis",
      "image": "redis:alpine",
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/redis",
          "containerPath": "/data"
        }
      ],
      "healthCheck": {
        "test": "redis-cli ping",
        "interval": "1s",
        "timeout": "3s",
        "retries": 30
      }
    }
  ],
  "schemaVersion": 2,
  "$schema": "https://schemas.runtipi.io/dynamic-compose.json"
}
