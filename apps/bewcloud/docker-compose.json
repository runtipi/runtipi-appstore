{
    "$schema": "../dynamic-compose-schema.json",
    "services": [
        {
            "name": "bewcloud",
            "image": "ghcr.io/bewcloud/bewcloud:v1.4.7",
            "internalPort": 8053,
            "isMain": true,
            "environment": {
                "PORT": "8000",
                "POSTGRESQL_HOST": "bewcloud-db",
                "POSTGRESQL_USER": "bewcloud",
                "POSTGRESQL_PASSWORD": "${DB_PASSWORD}",
                "POSTGRESQL_DBNAME": "bewcloud",
                "POSTGRESQL_PORT": "5432",
                "JWT_SECRET": "${JWT_SECRET}",
                "PASSWORD_SALT": "${PASSWORD_SALT}",
                "BREVO_API_KEY": "${BREVO_API_KEY}",
                "CONFIG_ALLOW_SIGNUPS": "${ALLOW_SIGNUPS}",
                "CONFIG_ENABLED_APPS": "news,notes,photos",
                "CONFIG_FILES_ROOT_PATH": "files",
                "CONFIG_ENABLE_EMAILS": "${ENABLE_EMAIL}"
            },
            "volumes": [
                {
                    "hostPath": "${APP_DATA_DIR}/data/bewcloud/files",
                    "containerPath": "/files"
                }
            ]
        },
        {
            "name": "bewcloud-db",
            "image": "postgres:15-alpine",
            "environment": {
                "POSTGRES_USER": "bewcloud",
                "POSTGRES_PASSWORD": "${DB_PASSWORD}",
                "POSTGRES_DB": "bewcloud"
            },
            "volumes": [
                {
                    "hostPath": "${APP_DATA_DIR}/data/bewcloud/db",
                    "containerPath": "/var/lib/postgresql/data"
                }
            ]
        }
    ]
}