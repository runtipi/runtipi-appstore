{
  "services": [
    {
      "name": "emqx",
      "image": "emqx/emqx:6.0.0",
      "isMain": true,
      "internalPort": 18083,
      "addPorts": [
        {
          "hostPort": 1883,
          "containerPort": 1883
        },
        {
          "hostPort": 8083,
          "containerPort": 8083
        },
        {
          "hostPort": 8084,
          "containerPort": 8084
        },
        {
          "hostPort": 8883,
          "containerPort": 8883
        }
      ],
      "environment": [
        {
          "key": "TZ",
          "value": "${TZ}"
        },
        {
          "key": "EMQX_NODE_NAME",
          "value": "emqx@emqx"
        },
        {
          "key": "EMQX_CLUSTER__DISCOVERY_STRATEGY",
          "value": "static"
        },
        {
          "key": "EMQX_CLUSTER__STATIC__SEEDS",
          "value": "[emqx@emqx,emqx@emqx-n2]"
        }
      ],
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/n1",
          "containerPath": "/opt/emqx/data"
        }
      ],
      "healthCheck": {
        "interval": "5s",
        "timeout": "25s",
        "retries": 5,
        "test": "/opt/emqx/bin/emqx ctl status"
      }
    },
    {
      "name": "emqx-n2",
      "image": "emqx/emqx:6.0.0",
      "environment": [
        {
          "key": "TZ",
          "value": "${TZ}"
        },
        {
          "key": "EMQX_NODE_NAME",
          "value": "emqx@emqx-n2"
        },
        {
          "key": "EMQX_CLUSTER__DISCOVERY_STRATEGY",
          "value": "static"
        },
        {
          "key": "EMQX_CLUSTER__STATIC__SEEDS",
          "value": "[emqx@emqx,emqx@emqx-n2]"
        }
      ],
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/n2",
          "containerPath": "/opt/emqx/data"
        }
      ],
      "healthCheck": {
        "interval": "5s",
        "timeout": "25s",
        "retries": 5,
        "test": "/opt/emqx/bin/emqx ctl status"
      }
    }
  ],
  "schemaVersion": 2,
  "$schema": "https://schemas.runtipi.io/v2/dynamic-compose.json"
}
