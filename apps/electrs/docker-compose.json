{
  "services": [
    {
      "name": "electrs-ui",
      "image": "ghcr.io/montejojorge/electrs-ui:v0.9.2",
      "isMain": true,
      "internalPort": 3006,
      "environment": [
        {
          "key": "BITCOIND_DIR",
          "value": "/data/.bitcoin"
        },
        {
          "key": "ELECTRUM_LOCAL_DOMAIN",
          "value": "runtipi.home"
        },
        {
          "key": "ELECTRUM_IP_ADDRESS",
          "value": "${INTERNAL_IP}"
        },
        {
          "key": "ELECTRS_HOST",
          "value": "electrs"
        },
        {
          "key": "BITCOIND_HOST",
          "value": "${BITCOIND_HOST:-bitcoind}"
        }
      ],
      "volumes": [
        {
          "hostPath": "${BITCOIND_DIR:-${APP_DATA_DIR}/../bitcoind/data}",
          "containerPath": "/data/.bitcoin",
          "readOnly": true
        }
      ]
    },
    {
      "name": "electrs",
      "image": "getumbrel/electrs:v0.10.9",
      "isMain": true,
      "addPorts": [
        {
          "hostPort": 50001,
          "containerPort": 50001
        }
      ],
      "user": "0:0",
      "environment": [
        {
          "key": "ELECTRS_COOKIE_FILE",
          "value": "/data/.bitcoin/.cookie"
        },
        {
          "key": "ELECTRS_DB_DIR",
          "value": "/data/db"
        },
        {
          "key": "ELECTRS_ELECTRUM_RPC_ADDR",
          "value": "0.0.0.0:50001"
        },
        {
          "key": "ELECTRS_LOG_FILTERS",
          "value": "INFO"
        },
        {
          "key": "ELECTRS_DAEMON_RPC_ADDR",
          "value": "${BITCOIND_HOST:-bitcoind}:8332"
        },
        {
          "key": "ELECTRS_DAEMON_P2P_ADDR",
          "value": "${BITCOIND_HOST:-bitcoind}:8333"
        }
      ],
      "volumes": [
        {
          "hostPath": "${BITCOIND_DIR:-${APP_DATA_DIR}/../bitcoind/data}",
          "containerPath": "/data/.bitcoin",
          "readOnly": true
        },
        {
          "hostPath": "${APP_DATA_DIR}/data",
          "containerPath": "/data"
        }
      ],
      "stopGracePeriod": "15m"
    }
  ],
  "schemaVersion": 2,
  "$schema": "https://schemas.runtipi.io/dynamic-compose.json"
}
