{
  "schemaVersion": 2,
  "$schema": "https://schemas.runtipi.io/v2/dynamic-compose.json",
  "services": [
    {
      "name": "ollama-nvidia",
      "image": "ollama/ollama:0.12.10",
      "isMain": true,
      "internalPort": 11434,
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/.ollama",
          "containerPath": "/root/.ollama"
        }
      ],
      "deploy": {
        "resources": {
          "reservations": {
            "devices": [
              {
                "driver": "nvidia",
                "count": "all",
                "capabilities": ["gpu"]
              }
            ]
          }
        }
      }
    }
  ]
}
