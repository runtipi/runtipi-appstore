{
  "services": [
    {
      "name": "postfix-relay",
      "image": "simenduev/postfix-relay:1.4.0",
      "isMain": true,
      "internalPort": 25,
      "environment": [
        {
          "key": "ACCEPTED_NETWORKS",
          "value": "${RELAY_ACCEPTED_NETWORKS}"
        },
        {
          "key": "SMTP_HOST",
          "value": "${RELAY_SMTP_HOST}"
        },
        {
          "key": "SMTP_LOGIN",
          "value": "${RELAY_SMTP_LOGIN}"
        },
        {
          "key": "SMTP_PASSWORD",
          "value": "${RELAY_SMTP_PASSWORD}"
        },
        {
          "key": "SMTP_PORT",
          "value": "${RELAY_SMTP_PORT}"
        },
        {
          "key": "TLS_VERIFY",
          "value": "${RELAY_TLS_VERIFY}"
        },
        {
          "key": "USE_TLS",
          "value": "${RELAY_USE_TLS}"
        }
      ],
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/config",
          "containerPath": "/root/config"
        }
      ],
      "healthCheck": {
        "interval": "10s",
        "timeout": "5s",
        "retries": 5,
        "startPeriod": "30s",
        "test": "netstat -an | grep 25 > /dev/null; if [ 0 != $? ]; then exit 1; fi;"
      }
    }
  ],
  "schemaVersion": 2,
  "$schema": "https://schemas.runtipi.io/v2/dynamic-compose.json"
}
