{
  "services": [
    {
      "name": "calcom",
      "image": "calcom/cal.com:v5.8.2",
      "isMain": true,
      "internalPort": 3000,
      "environment": [
        {
          "key": "DATABASE_HOST",
          "value": "db-calcom"
        },
        {
          "key": "DATABASE_URL",
          "value": "postgresql://${POSTGRES_USERNAME}:${POSTGRES_PASSWORD}@db-calcom/calcom"
        },
        {
          "key": "DATABASE_DIRECT_URL",
          "value": "postgresql://${POSTGRES_USERNAME}:${POSTGRES_PASSWORD}@db-calcom/calcom"
        },
        {
          "key": "POSTGRES_USER",
          "value": "${POSTGRES_USERNAME}"
        },
        {
          "key": "POSTGRES_PASSWORD",
          "value": "${POSTGRES_PASSWORD}"
        },
        {
          "key": "POSTGRES_DB",
          "value": "calcom"
        },
        {
          "key": "LICENSE",
          "value": "agree"
        },
        {
          "key": "NEXT_PUBLIC_LICENSE_CONSENT",
          "value": "agree"
        },
        {
          "key": "NEXT_PUBLIC_WEBAPP_URL",
          "value": "https://${APP_DOMAIN}"
        },
        {
          "key": "NEXTAUTH_SECRET",
          "value": "${CALCOM_NEXTAUTH_SECRET}"
        },
        {
          "key": "CALENDSO_ENCRYPTION_KEY",
          "value": "${CALENDSO_ENCRYPTION_KEY}"
        },
        {
          "key": "MS_GRAPH_CLIENT_ID",
          "value": "${MS_GRAPH_CLIENT_ID}"
        },
        {
          "key": "MS_GRAPH_CLIENT_SECRET",
          "value": "${MS_GRAPH_CLIENT_SECRET}"
        },
        {
          "key": "ZOOM_CLIENT_ID",
          "value": "${ZOOM_CLIENT_ID}"
        },
        {
          "key": "ZOOM_CLIENT_SECRET",
          "value": "${ZOOM_CLIENT_SECRET}"
        },
        {
          "key": "GOOGLE_API_CREDENTIALS",
          "value": "${CALCOM_GOOGLE_API_CREDENTIALS}"
        },
        {
          "key": "EMAIL_FROM",
          "value": "${EMAIL_FROM}"
        },
        {
          "key": "EMAIL_SERVER_HOST",
          "value": "${EMAIL_SERVER_HOST}"
        },
        {
          "key": "EMAIL_SERVER_PORT",
          "value": "${EMAIL_SERVER_PORT}"
        },
        {
          "key": "EMAIL_SERVER_PASSWORD",
          "value": "${EMAIL_SERVER_PASSWORD}"
        },
        {
          "key": "EMAIL_SERVER_USER",
          "value": "${EMAIL_SERVER_USER}"
        },
        {
          "key": "NODE_ENV",
          "value": "production"
        }
      ],
      "dependsOn": ["db-calcom"]
    },
    {
      "name": "db-calcom",
      "image": "postgres:16.1",
      "environment": [
        {
          "key": "POSTGRES_PASSWORD",
          "value": "${POSTGRES_PASSWORD}"
        },
        {
          "key": "POSTGRES_USER",
          "value": "${POSTGRES_USERNAME}"
        },
        {
          "key": "POSTGRES_DB",
          "value": "calcom"
        }
      ],
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/db",
          "containerPath": "/var/lib/postgresql/data"
        }
      ]
    }
  ],
  "schemaVersion": 2,
  "$schema": "https://schemas.runtipi.io/v2/dynamic-compose.json"
}
