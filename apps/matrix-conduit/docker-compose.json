{
  "$schema": "../dynamic-compose-schema.json",
  "services": [
    {
      "name": "matrix-conduit",
      "image": "matrixconduit/matrix-conduit:v0.9.0",
      "isMain": true,
      "environment": {
        "CONDUIT_SERVER_NAME": "${APP_DOMAIN}",
        "CONDUIT_DATABASE_PATH": "/var/lib/matrix-conduit/",
        "CONDUIT_DATABASE_BACKEND": "rocksdb",
        "CONDUIT_ADDRESS": "0.0.0.0",
        "CONDUIT_PORT": 6167,
        "CONDUIT_LOG": "${LOG:-warn,rocket=off,_=off,sled=off}",
        "CONDUIT_MAX_REQUEST_SIZE": "${MAX_REQUEST_SIZE:-20000000}",
        "CONDUIT_ALLOW_REGISTRATION": "${ALLOW_REGISTRATION:-false}",
        "CONDUIT_ALLOW_FEDERATION": "${ALLOW_FEDERATION:-false}",
        "CONDUIT_TRUSTED_SERVERS": "${TRUSTED_SERVERS:-[]}",
        "CONDUIT_ALLOW_CHECK_FOR_UPDATES": false,
        "CONDUIT_TURN_URIS": "${TURN_URIS:-[\"turn:localhost?transport=udp\", \"turn:localhost?transport=tcp\"]}",
        "CONDUIT_TURN_SECRET": "${TURN_SECRET:-turnsecret}",
        "CONDUIT_CONFIG": ""
      },
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data",
          "containerPath": "/var/lib/matrix-conduit/"
        }
      ]
    },
    {
      "name": "matrix-conduit-well-known",
      "image": null,
      "environment": {
        "APP_DOMAIN": "${APP_DOMAIN}"
      }
    }
  ]
}
