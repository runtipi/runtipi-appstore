{
  "services": [
    {
      "image": "ghcr.io/codex-team/codex.docs:v2.2",
      "name": "codex-docs",
      "internalPort": 3000,
      "isMain": true,
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/uploads",
          "containerPath": "/usr/src/app/uploads"
        },
        {
          "hostPath": "${APP_DATA_DIR}/data/db",
          "containerPath": "/usr/src/app/db"
        },
        {
          "hostPath": "${APP_DATA_DIR}/data/docs-config.yaml",
          "containerPath": "/usr/src/app/docs-config.yaml"
        }
      ],
      "environment": [
        {
          "key": "APP_CONFIG_auth_password",
          "value": "${CODEX_AUTH_PASSWORD}"
        },
        {
          "key": "APP_CONFIG_auth_secret",
          "value": "${CODEX_AUTH_SECRET}"
        },
        {
          "key": "APP_CONFIG_database_driver",
          "value": "mongodb"
        },
        {
          "key": "APP_CONFIG_database_mongodb_uri",
          "value": "mongodb://tipi:${CODEX_DB_PASSWORD}@codex-db:27017"
        }
      ]
    },
    {
      "image": "mongo:latest",
      "name": "codex-db",
      "environment": [
        {
          "key": "MONGO_INITDB_ROOT_USERNAME",
          "value": "tipi"
        },
        {
          "key": "MONGO_INITDB_ROOT_PASSWORD",
          "value": "${CODEX_DB_PASSWORD}"
        }
      ]
    }
  ],
  "schemaVersion": 2,
  "$schema": "https://schemas.runtipi.io/v2/dynamic-compose.json"
}
