{
  "services": [
    {
      "name": "viewtube",
      "image": "mauriceo/viewtube:0.17.0",
      "isMain": true,
      "internalPort": 8066,
      "environment": [
        {
          "key": "VIEWTUBE_DATABASE_HOST",
          "value": "viewtube-mongodb"
        },
        {
          "key": "VIEWTUBE_REDIS_HOST",
          "value": "viewtube-redis"
        },
        {
          "key": "VIEWTUBE_SECURE",
          "value": "true"
        },
        {
          "key": "VIEWTUBE_CORS_ORIGIN",
          "value": "${APP_PROTOCOL:-http}://${APP_DOMAIN}"
        }
      ],
      "dependsOn": ["viewtube-mongodb", "viewtube-redis"],
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/viewtube",
          "containerPath": "/data"
        }
      ]
    },
    {
      "name": "viewtube-mongodb",
      "image": "mongo:5",
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/db",
          "containerPath": "/data/db"
        }
      ]
    },
    {
      "name": "viewtube-redis",
      "image": "redis:7",
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/redis",
          "containerPath": "/data"
        }
      ]
    }
  ],
  "schemaVersion": 2,
  "$schema": "https://schemas.runtipi.io/v2/dynamic-compose.json"
}
