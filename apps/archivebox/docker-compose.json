{
  "schemaVersion": 2,
  "$schema": "https://schemas.runtipi.io/v2/dynamic-compose.json",
  "services": [
    {
      "name": "archivebox",
      "image": "archivebox/archivebox:0.7.3",
      "isMain": true,
      "internalPort": 8015,
      "environment": [
        { "key": "PORT", "value": "8015" },
        { "key": "PUBLIC_INDEX", "value": "${ARCHIVEBOX_PUBLIC_INDEX-true}" },
        { "key": "PUBLIC_SNAPSHOTS", "value": "${ARCHIVEBOX_PUBLIC_SNAPSHOTS-true}" },
        { "key": "PUBLIC_ADD_VIEW", "value": "${ARCHIVEBOX_PUBLIC_ADD_VIEW-false}" },
        { "key": "ADMIN_USERNAME", "value": "${ARCHIVEBOX_USERNAME}" },
        { "key": "ADMIN_PASSWORD", "value": "${ARCHIVEBOX_PASSWORD}" },
        { "key": "PUID", "value": "1000" },
        { "key": "PGID", "value": "1000" },
        { "key": "SEARCH_BACKEND_ENGINE", "value": "${ARCHIVEBOX_SEARCH_BACKEND_ENGINE}" },
        { "key": "SEARCH_BACKEND_HOST_NAME", "value": "${ARCHIVEBOX_SEARCH_BACKEND_HOST_NAME}" },
        { "key": "SEARCH_BACKEND_PASSWORD", "value": "${ARCHIVEBOX_SEARCH_BACKEND_PASSWORD}" },
        { "key": "MEDIA_MAX_SIZE", "value": "${ARCHIVEBOX_MEDIA_MAX_SIZE-750m}" },
        { "key": "TIMEOUT", "value": "${ARCHIVEBOX_TIMEOUT-60}" },
        { "key": "CHECK_SSL_VALIDITY", "value": "${ARCHIVEBOX_CHECK_SSL_VALIDITY-true}" },
        { "key": "SAVE_ARCHIVE_DOT_ORG", "value": "${ARCHIVEBOX_SAVE_ARCHIVE_DOT_ORGE-true}" }
      ],
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data",
          "containerPath": "/data"
        }
      ],
      "command": "server --quick-init 0.0.0.0:8015"
    }
  ]
}
